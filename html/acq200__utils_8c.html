<!DOCTYPE html PUBLIC "-//W3C//DTD XHTML 1.0 Transitional//EN" "http://www.w3.org/TR/xhtml1/DTD/xhtml1-transitional.dtd">
<html xmlns="http://www.w3.org/1999/xhtml">
<head>
<meta http-equiv="Content-Type" content="text/xhtml;charset=UTF-8"/>
<title>ACQ200 HOSTDRV: acq200_utils.c File Reference</title>
<link href="tabs.css" rel="stylesheet" type="text/css"/>
<link href="doxygen.css" rel="stylesheet" type="text/css"/>
</head>
<body>
<!-- Generated by Doxygen 1.7.4 -->
<div id="top">
<div id="titlearea">
<table cellspacing="0" cellpadding="0">
 <tbody>
 <tr style="height: 56px;">
  <td style="padding-left: 0.5em;">
   <div id="projectname">ACQ200 HOSTDRV</div>
  </td>
 </tr>
 </tbody>
</table>
</div>
  <div id="navrow1" class="tabs">
    <ul class="tablist">
      <li><a href="index.html"><span>Main&#160;Page</span></a></li>
      <li><a href="pages.html"><span>Related&#160;Pages</span></a></li>
      <li><a href="annotated.html"><span>Data&#160;Structures</span></a></li>
      <li class="current"><a href="files.html"><span>Files</span></a></li>
    </ul>
  </div>
  <div id="navrow2" class="tabs2">
    <ul class="tablist">
      <li><a href="files.html"><span>File&#160;List</span></a></li>
      <li><a href="globals.html"><span>Globals</span></a></li>
    </ul>
  </div>
</div>
<div class="header">
  <div class="summary">
<a href="#nested-classes">Data Structures</a> &#124;
<a href="#define-members">Defines</a> &#124;
<a href="#func-members">Functions</a>  </div>
  <div class="headertitle">
<div class="title">acq200_utils.c File Reference</div>  </div>
</div>
<div class="contents">
<div class="textblock"><code>#include &lt;linux/module.h&gt;</code><br/>
<code>#include &lt;linux/interrupt.h&gt;</code><br/>
<code>#include &lt;linux/kernel.h&gt;</code><br/>
<code>#include &lt;linux/fs.h&gt;</code><br/>
<code>#include &lt;linux/errno.h&gt;</code><br/>
<code>#include &lt;linux/types.h&gt;</code><br/>
<code>#include &lt;linux/proc_fs.h&gt;</code><br/>
<code>#include &lt;linux/fcntl.h&gt;</code><br/>
<code>#include &lt;linux/pci.h&gt;</code><br/>
<code>#include &lt;linux/sched.h&gt;</code><br/>
<code>#include &lt;asm/io.h&gt;</code><br/>
<code>#include &lt;asm/irq.h&gt;</code><br/>
<code>#include &lt;asm/uaccess.h&gt;</code><br/>
<code>#include &lt;asm/system.h&gt;</code><br/>
<code>#include &lt;asm/segment.h&gt;</code><br/>
<code>#include &quot;<a class="el" href="acq200__debug_8h_source.html">acq200_debug.h</a>&quot;</code><br/>
<code>#include &quot;<a class="el" href="acq200_8h_source.html">acq200.h</a>&quot;</code><br/>
</div>
<p><a href="acq200__utils_8c_source.html">Go to the source code of this file.</a></p>
<table class="memberdecls">
<tr><td colspan="2"><h2><a name="nested-classes"></a>
Data Structures</h2></td></tr>
<tr><td class="memItemLeft" align="right" valign="top">struct &#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="structMASK__ITERATOR.html">MASK_ITERATOR</a></td></tr>
<tr><td colspan="2"><h2><a name="define-members"></a>
Defines</h2></td></tr>
<tr><td class="memItemLeft" align="right" valign="top">#define&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="acq200__utils_8c.html#a89ac02ee32351581b04f44498bd9c7b0">CONFIG_GENERIC_HARDIRQS</a>&#160;&#160;&#160;1</td></tr>
<tr><td colspan="2"><h2><a name="func-members"></a>
Functions</h2></td></tr>
<tr><td class="memItemLeft" align="right" valign="top">int&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="acq200__utils_8c.html#a0b1ee649d2ba8f140243b378156775d1">hasNext</a> (struct <a class="el" href="structMASK__ITERATOR.html">MASK_ITERATOR</a> *it)</td></tr>
<tr><td class="memItemLeft" align="right" valign="top">int&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="acq200__utils_8c.html#a20727d1e2d557c161bb9cb4b5e364301">getNext</a> (struct <a class="el" href="structMASK__ITERATOR.html">MASK_ITERATOR</a> *it)</td></tr>
<tr><td class="memItemLeft" align="right" valign="top">int&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="acq200__utils_8c.html#af703fe2649d0a5a82dd889a06ab96b44">acq200_intsDisable</a> (unsigned irqs)</td></tr>
<tr><td class="mdescLeft">&#160;</td><td class="mdescRight">disable interrupts defined by clear bits in irqs  <a href="#af703fe2649d0a5a82dd889a06ab96b44"></a><br/></td></tr>
<tr><td class="memItemLeft" align="right" valign="top">int&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="acq200__utils_8c.html#a0f8df2f9998403439cb6990ae4458945">acq200_intsEnable</a> (unsigned irqs)</td></tr>
<tr><td class="mdescLeft">&#160;</td><td class="mdescRight">enable interrupts defined by set bits in irqs  <a href="#a0f8df2f9998403439cb6990ae4458945"></a><br/></td></tr>
<tr><td class="memItemLeft" align="right" valign="top">static unsigned&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="acq200__utils_8c.html#a9574347df175dcdfec14d0c4e4c001f4">get_mask</a> (char mdef)</td></tr>
<tr><td class="memItemLeft" align="right" valign="top">int&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="acq200__utils_8c.html#acc3e3782f25de2fc52581c56f0a2d8c3">acq200_intsMask</a> (struct <a class="el" href="structAcq200Device.html">Acq200Device</a> *device)</td></tr>
<tr><td class="mdescLeft">&#160;</td><td class="mdescRight">unmap remote regs are on device unload  <a href="#acc3e3782f25de2fc52581c56f0a2d8c3"></a><br/></td></tr>
<tr><td class="memItemLeft" align="right" valign="top">int&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="acq200__utils_8c.html#af113c0e6c67857dcbd33c7ed1cd8874b">acq200_bkl</a> (struct <a class="el" href="structAcq200Device.html">Acq200Device</a> *device, int bkl_action)</td></tr>
</table>
<hr/><h2>Define Documentation</h2>
<a class="anchor" id="a89ac02ee32351581b04f44498bd9c7b0"></a><!-- doxytag: member="acq200_utils.c::CONFIG_GENERIC_HARDIRQS" ref="a89ac02ee32351581b04f44498bd9c7b0" args="" -->
<div class="memitem">
<div class="memproto">
      <table class="memname">
        <tr>
          <td class="memname">#define CONFIG_GENERIC_HARDIRQS&#160;&#160;&#160;1</td>
        </tr>
      </table>
</div>
<div class="memdoc">

<p>Definition at line <a class="el" href="acq200__utils_8c_source.html#l00003">3</a> of file <a class="el" href="acq200__utils_8c_source.html">acq200_utils.c</a>.</p>

</div>
</div>
<hr/><h2>Function Documentation</h2>
<a class="anchor" id="af113c0e6c67857dcbd33c7ed1cd8874b"></a><!-- doxytag: member="acq200_utils.c::acq200_bkl" ref="af113c0e6c67857dcbd33c7ed1cd8874b" args="(struct Acq200Device *device, int bkl_action)" -->
<div class="memitem">
<div class="memproto">
      <table class="memname">
        <tr>
          <td class="memname">int acq200_bkl </td>
          <td>(</td>
          <td class="paramtype">struct <a class="el" href="structAcq200Device.html">Acq200Device</a> *&#160;</td>
          <td class="paramname"><em>device</em>, </td>
        </tr>
        <tr>
          <td class="paramkey"></td>
          <td></td>
          <td class="paramtype">int&#160;</td>
          <td class="paramname"><em>bkl_action</em>&#160;</td>
        </tr>
        <tr>
          <td></td>
          <td>)</td>
          <td></td><td></td>
        </tr>
      </table>
</div>
<div class="memdoc">

<p>Definition at line <a class="el" href="acq200__utils_8c_source.html#l00153">153</a> of file <a class="el" href="acq200__utils_8c_source.html">acq200_utils.c</a>.</p>

<p>References <a class="el" href="structAcq200Device.html#abba8bf41e5a096fbf6072a1a59b80bfd">Acq200Device::bkl</a>, <a class="el" href="acq200_8h_source.html#l00475">BKL_LOCK</a>, <a class="el" href="acq200_8h_source.html#l00477">BKL_QUERY</a>, <a class="el" href="acq200_8h_source.html#l00476">BKL_UNLOCK</a>, <a class="el" href="acq200_8h_source.html#l00220">Acq200Device::BKL::flags</a>, <a class="el" href="acq200__debug_8h_source.html#l00033">info</a>, <a class="el" href="acq200_8h_source.html#l00221">Acq200Device::BKL::is_locked</a>, and <a class="el" href="acq200_8h_source.html#l00219">Acq200Device::BKL::lock</a>.</p>

<p>Referenced by <a class="el" href="acq200__if_8c_source.html#l00332">store_imask()</a>.</p>

</div>
</div>
<a class="anchor" id="af703fe2649d0a5a82dd889a06ab96b44"></a><!-- doxytag: member="acq200_utils.c::acq200_intsDisable" ref="af703fe2649d0a5a82dd889a06ab96b44" args="(unsigned irqs)" -->
<div class="memitem">
<div class="memproto">
      <table class="memname">
        <tr>
          <td class="memname">int acq200_intsDisable </td>
          <td>(</td>
          <td class="paramtype">unsigned&#160;</td>
          <td class="paramname"><em>irqs</em></td><td>)</td>
          <td></td>
        </tr>
      </table>
</div>
<div class="memdoc">

<p>disable interrupts defined by clear bits in irqs </p>
<dl><dt><b>Parameters:</b></dt><dd>
  <table class="params">
    <tr><td class="paramname">irqs</td><td>disable interrupts defined by clear bits in irqs </td></tr>
  </table>
  </dd>
</dl>

<p>Definition at line <a class="el" href="acq200__utils_8c_source.html#l00084">84</a> of file <a class="el" href="acq200__utils_8c_source.html">acq200_utils.c</a>.</p>

<p>References <a class="el" href="acq200__utils_8c_source.html#l00057">getNext()</a>, and <a class="el" href="acq200__utils_8c_source.html#l00035">hasNext()</a>.</p>

<p>Referenced by <a class="el" href="acq200_8c_source.html#l00730">acq200_ioctl()</a>.</p>

</div>
</div>
<a class="anchor" id="a0f8df2f9998403439cb6990ae4458945"></a><!-- doxytag: member="acq200_utils.c::acq200_intsEnable" ref="a0f8df2f9998403439cb6990ae4458945" args="(unsigned irqs)" -->
<div class="memitem">
<div class="memproto">
      <table class="memname">
        <tr>
          <td class="memname">int acq200_intsEnable </td>
          <td>(</td>
          <td class="paramtype">unsigned&#160;</td>
          <td class="paramname"><em>irqs</em></td><td>)</td>
          <td></td>
        </tr>
      </table>
</div>
<div class="memdoc">

<p>enable interrupts defined by set bits in irqs </p>
<dl><dt><b>Parameters:</b></dt><dd>
  <table class="params">
    <tr><td class="paramname">irqs</td><td>enable interrupts defined by set bits in irqs </td></tr>
  </table>
  </dd>
</dl>

<p>Definition at line <a class="el" href="acq200__utils_8c_source.html#l00094">94</a> of file <a class="el" href="acq200__utils_8c_source.html">acq200_utils.c</a>.</p>

<p>References <a class="el" href="acq200__utils_8c_source.html#l00057">getNext()</a>, and <a class="el" href="acq200__utils_8c_source.html#l00035">hasNext()</a>.</p>

<p>Referenced by <a class="el" href="acq200_8c_source.html#l00730">acq200_ioctl()</a>.</p>

</div>
</div>
<a class="anchor" id="acc3e3782f25de2fc52581c56f0a2d8c3"></a><!-- doxytag: member="acq200_utils.c::acq200_intsMask" ref="acc3e3782f25de2fc52581c56f0a2d8c3" args="(struct Acq200Device *device)" -->
<div class="memitem">
<div class="memproto">
      <table class="memname">
        <tr>
          <td class="memname">int acq200_intsMask </td>
          <td>(</td>
          <td class="paramtype">struct <a class="el" href="structAcq200Device.html">Acq200Device</a> *&#160;</td>
          <td class="paramname"><em>device</em></td><td>)</td>
          <td></td>
        </tr>
      </table>
</div>
<div class="memdoc">

<p>unmap remote regs are on device unload </p>
<p>disable interrupts defined by set bits in imask, a string of hex chars </p>
<dl><dt><b>Parameters:</b></dt><dd>
  <table class="params">
    <tr><td class="paramname">device</td><td>disable interrupts defined by clear bits in irqs re-enable interrupts that are not masked this time, but were last time. </td></tr>
  </table>
  </dd>
</dl>

<p>Definition at line <a class="el" href="acq200__utils_8c_source.html#l00113">113</a> of file <a class="el" href="acq200__utils_8c_source.html">acq200_utils.c</a>.</p>

<p>References <a class="el" href="acq200__debug_8h_source.html#l00009">acq200_debug</a>, <a class="el" href="acq200__debug_8h_source.html#l00026">dbg</a>, <a class="el" href="acq200__utils_8c_source.html#l00105">get_mask()</a>, <a class="el" href="acq200_8h_source.html#l00160">Acq200Device::imask</a>, and <a class="el" href="acq200_8h_source.html#l00161">Acq200Device::imask_a</a>.</p>

<p>Referenced by <a class="el" href="acq200__if_8c_source.html#l00332">store_imask()</a>.</p>

</div>
</div>
<a class="anchor" id="a9574347df175dcdfec14d0c4e4c001f4"></a><!-- doxytag: member="acq200_utils.c::get_mask" ref="a9574347df175dcdfec14d0c4e4c001f4" args="(char mdef)" -->
<div class="memitem">
<div class="memproto">
      <table class="memname">
        <tr>
          <td class="memname">static unsigned get_mask </td>
          <td>(</td>
          <td class="paramtype">char&#160;</td>
          <td class="paramname"><em>mdef</em></td><td>)</td>
          <td><code> [static]</code></td>
        </tr>
      </table>
</div>
<div class="memdoc">

<p>Definition at line <a class="el" href="acq200__utils_8c_source.html#l00105">105</a> of file <a class="el" href="acq200__utils_8c_source.html">acq200_utils.c</a>.</p>

<p>Referenced by <a class="el" href="acq200__utils_8c_source.html#l00113">acq200_intsMask()</a>.</p>

</div>
</div>
<a class="anchor" id="a20727d1e2d557c161bb9cb4b5e364301"></a><!-- doxytag: member="acq200_utils.c::getNext" ref="a20727d1e2d557c161bb9cb4b5e364301" args="(struct MASK_ITERATOR *it)" -->
<div class="memitem">
<div class="memproto">
      <table class="memname">
        <tr>
          <td class="memname">int getNext </td>
          <td>(</td>
          <td class="paramtype">struct <a class="el" href="structMASK__ITERATOR.html">MASK_ITERATOR</a> *&#160;</td>
          <td class="paramname"><em>it</em></td><td>)</td>
          <td></td>
        </tr>
      </table>
</div>
<div class="memdoc">

<p>Definition at line <a class="el" href="acq200__utils_8c_source.html#l00057">57</a> of file <a class="el" href="acq200__utils_8c_source.html">acq200_utils.c</a>.</p>

<p>References <a class="el" href="acq200__utils_8c_source.html#l00031">MASK_ITERATOR::icursor</a>, and <a class="el" href="acq200__utils_8c_source.html#l00030">MASK_ITERATOR::mask</a>.</p>

<p>Referenced by <a class="el" href="acq200__utils_8c_source.html#l00084">acq200_intsDisable()</a>, and <a class="el" href="acq200__utils_8c_source.html#l00094">acq200_intsEnable()</a>.</p>

</div>
</div>
<a class="anchor" id="a0b1ee649d2ba8f140243b378156775d1"></a><!-- doxytag: member="acq200_utils.c::hasNext" ref="a0b1ee649d2ba8f140243b378156775d1" args="(struct MASK_ITERATOR *it)" -->
<div class="memitem">
<div class="memproto">
      <table class="memname">
        <tr>
          <td class="memname">int hasNext </td>
          <td>(</td>
          <td class="paramtype">struct <a class="el" href="structMASK__ITERATOR.html">MASK_ITERATOR</a> *&#160;</td>
          <td class="paramname"><em>it</em></td><td>)</td>
          <td></td>
        </tr>
      </table>
</div>
<div class="memdoc">

<p>Definition at line <a class="el" href="acq200__utils_8c_source.html#l00035">35</a> of file <a class="el" href="acq200__utils_8c_source.html">acq200_utils.c</a>.</p>

<p>References <a class="el" href="acq200__utils_8c_source.html#l00031">MASK_ITERATOR::icursor</a>, and <a class="el" href="acq200__utils_8c_source.html#l00030">MASK_ITERATOR::mask</a>.</p>

<p>Referenced by <a class="el" href="acq200__utils_8c_source.html#l00084">acq200_intsDisable()</a>, and <a class="el" href="acq200__utils_8c_source.html#l00094">acq200_intsEnable()</a>.</p>

</div>
</div>
</div>
<hr class="footer"/><address class="footer"><small>Generated by&#160;
<a href="http://www.doxygen.org/index.html">
<img class="footer" src="doxygen.png" alt="doxygen"/></a> 1.7.4 </small></address>
</body>
</html>
